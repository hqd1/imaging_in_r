## ----setup, include=FALSE------------------------------------------------
library(methods)
knitr::opts_chunk$set(echo = TRUE, comment = "")

## ----vec-----------------------------------------------------------------
v = c(1, 4, 3, 7, 8)
print(v)

## ----vec2----------------------------------------------------------------
w = 1:5
print(w)

## ----mat-----------------------------------------------------------------
m = matrix(1:12, nrow = 3)
print(m)

## ----arr-----------------------------------------------------------------
a = array(1:36, dim = c(3, 4, 3))

## ----vecSub--------------------------------------------------------------
print(v)
print(v[4])
print(v[1:3])
print(v[c(1,3,5)])

## ----matSub--------------------------------------------------------------
print(m)
print(m[,4])
print(m[2,])
print(m[1,3])
print(m[1:2,3:4])

## ----arrSub--------------------------------------------------------------
print(a[1,1,1])
dim(a[,4,])

## ----arrSub_bad, eval = FALSE--------------------------------------------
## a[,4]

## ----add_vw--------------------------------------------------------------
print(v + 4)
print(v + w)
print(sqrt(w^2))

## ----true----------------------------------------------------------------
print(!FALSE)
print(TRUE | FALSE)
print(FALSE & FALSE)

## ------------------------------------------------------------------------
which(v > 5)
v[ which(v > 5) ]

## ------------------------------------------------------------------------
v[ v > 5 ]

## ------------------------------------------------------------------------
library(neurobase)
t1 = readnii("training01_01_mprage.nii.gz")

## ------------------------------------------------------------------------
t1[5, 4, 3]

## ---- eval = FALSE-------------------------------------------------------
## t1[5, 4, ] # returns a vector of numbers (1-d)
## t1[, 4, ] # returns a 2-d matrix
## t1[1, , ] # returns a 2-d matrix
## t1[t1 < 500] # using logicals

## ------------------------------------------------------------------------
head(t1[ t1 > 400 ])

## ------------------------------------------------------------------------
class(t1 > 400)
head(t1 > 400)

## ------------------------------------------------------------------------
head(which(t1 > 400, arr.ind = TRUE))

## ------------------------------------------------------------------------
head(which(t1 > 400, arr.ind = FALSE))

## ------------------------------------------------------------------------
t1_copy = t1
t1_copy[ t1_copy > 400] = 400 # changed these values!
max(t1_copy) # should be 400
max(t1) 

## ------------------------------------------------------------------------
writenii(nim = t1_copy, 
         filename = "training01_mprage_under400.nii.gz")
file.exists("training01_mprage_under400.nii.gz")

## ----vec_nifti, cache=FALSE----------------------------------------------
vals = c(t1)
class(vals)

## ----dens----------------------------------------------------------------
plot(density(vals))

## ----dens_with_mask------------------------------------------------------
plot(density(t1, mask = t1 > 0))

## ----list----------------------------------------------------------------
l = list()
l[[1]] = v
l[[2]] = m
print(l)

## ----listSub-------------------------------------------------------------
print(l[[1]])

## ----named_vec-----------------------------------------------------------
x = c(first = 1, third = 14, second = 5)
print(x)
x[c("third")]

## ----named_lst-----------------------------------------------------------
names(l) = c("V", "m")
l$V

## ------------------------------------------------------------------------
c(paste("img", ".nii.gz"), paste0("img", ".nii.gz"))
x = file.path("output_directory", paste0("img", ".nii.gz")); print(x)

## ------------------------------------------------------------------------
c(nii.stub(x), nii.stub(x, bn = TRUE))

